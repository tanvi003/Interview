{"ast":null,"code":"var _jsxFileName = \"/Users/tanvimahajan/Downloads/InterviewAs/src/EditInterview.js\";\nimport React, { Component } from 'react';\nimport DatePicker from 'react-datepicker';\nimport axios from 'axios';\nimport './AddInterview.css';\nimport Select from 'react-select';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Error = ({\n  message\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"alert alert-danger\",\n  role: \"alert\",\n  children: [\"OOPS! \", message]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 9,\n  columnNumber: 3\n}, this);\n\n_c = Error;\n\nclass EditInterview extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getOptions = users => {\n      const options = [];\n\n      for (let user of users) {\n        options.push({\n          label: user.name,\n          value: user\n        });\n      }\n\n      console.log(options, 'options');\n      return options;\n    };\n\n    let {\n      pdate,\n      pstarttime,\n      pendtime\n    } = this.props.location.state;\n    this.state = {\n      date: new Date(pdate),\n      startTime: pstarttime,\n      endTime: pendtime,\n      participants: [],\n      tempPart: [],\n      error: false,\n      errorMsg: \"\"\n    };\n    this.handleDateChange = this.handleDateChange.bind(this);\n    this.handleSelectBoxChange = this.handleSelectBoxChange.bind(this);\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.handleStartTimeChange = this.handleStartTimeChange.bind(this);\n    this.handleEndTimeChange = this.handleEndTimeChange.bind(this);\n  }\n\n  componentDidMount() {\n    axios.get('http://localhost:5000/participants').then(res => {\n      console.log(\"res => \", res);\n      this.setState({\n        participants: res.data\n      });\n      console.log(\"Updated STATE : \", this.state.participants);\n    }).catch(error => {\n      console.log(\"Error : \", error);\n    });\n  }\n\n  componentDidUpdate() {\n    console.log(\"State Updated: \", this.state);\n  }\n\n  handleFormSubmit(event) {\n    event.preventDefault();\n    let lisOfparticipants = this.state.tempPart.map(item => {\n      return item.value;\n    });\n    this.setState({\n      error: null,\n      errorMsg: ''\n    });\n    const newInterview = {\n      date: this.state.date,\n      startTime: this.state.startTime,\n      endTime: this.state.endTime,\n      participants: lisOfparticipants\n    };\n    console.log(\"New Exercise => \", newInterview); // making POST REQUEST to backend  \n\n    axios.post('http://localhost:5000/interviews', newInterview).then(res => {\n      console.log(\"res => \", res);\n      console.log(res.data);\n      window.location = '/';\n    }).catch(error => {\n      let errorMsg = error.response.data.message;\n      this.setState({\n        error: true,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  handleDateChange(newDate) {\n    this.setState({\n      date: newDate\n    });\n  }\n\n  handleSelectBoxChange(data) {\n    this.setState({\n      tempPart: data\n    });\n  }\n\n  handleStartTimeChange(event) {\n    this.setState({\n      startTime: event.target.value\n    });\n  }\n\n  handleEndTimeChange(event) {\n    this.setState({\n      endTime: event.target.value\n    });\n  }\n\n  render() {\n    // let defaultPart = this.props.location.state.pa\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-light section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          textAlign: \"center\"\n        },\n        children: \" Create Interview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), this.state.error ? /*#__PURE__*/_jsxDEV(Error, {\n        message: this.state.errorMsg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 12\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleFormSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Select Participants : \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 20\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            isMulti: true,\n            closeMenuOnSelect: true,\n            name: \"candidates\",\n            options: this.getOptions(this.state.participants),\n            className: \"basic-multi-select\",\n            classNamePrefix: \"select\",\n            value: !this.state.tempPart.length ? this.getOptions(this.state.participants.filter(option => this.props.location.state.participants.includes(option.id))) : this.getOptions(this.state.tempPart.map(item => item.value)),\n            onChange: selectedOption => {\n              console.log(selectedOption);\n              this.handleSelectBoxChange(selectedOption);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Date: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 20\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(DatePicker, {\n              selected: this.state.date,\n              onChange: this.handleDateChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Start Time:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 22\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"time\",\n              className: \"form-control\",\n              id: \"start_time\",\n              value: this.state.startTime,\n              onChange: this.handleStartTimeChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"End Time:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 22\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"time\",\n              className: \"form-control\",\n              id: \"end_time\",\n              value: this.state.endTime,\n              onChange: this.handleEndTimeChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Save Details\",\n            className: \"btn btn-primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default EditInterview;\n\nvar _c;\n\n$RefreshReg$(_c, \"Error\");","map":{"version":3,"sources":["/Users/tanvimahajan/Downloads/InterviewAs/src/EditInterview.js"],"names":["React","Component","DatePicker","axios","Select","Error","message","EditInterview","constructor","props","getOptions","users","options","user","push","label","name","value","console","log","pdate","pstarttime","pendtime","location","state","date","Date","startTime","endTime","participants","tempPart","error","errorMsg","handleDateChange","bind","handleSelectBoxChange","handleFormSubmit","handleStartTimeChange","handleEndTimeChange","componentDidMount","get","then","res","setState","data","catch","componentDidUpdate","event","preventDefault","lisOfparticipants","map","item","newInterview","post","window","response","newDate","target","render","textAlign","length","filter","option","includes","id","selectedOption"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport DatePicker from 'react-datepicker';\nimport axios from 'axios';\nimport './AddInterview.css';\nimport Select from 'react-select';\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nconst Error = ({ message }) => (\n  <div className=\"alert alert-danger\" role=\"alert\">\n    OOPS! {message}\n  </div>\n)\n\nclass EditInterview extends Component {\n\n  constructor(props) {\n    super(props);\n\n    let {\n      pdate,\n      pstarttime,\n      pendtime,\n    } = this.props.location.state;\n    this.state = {\n      date: new Date(pdate),\n      startTime: pstarttime,\n      endTime: pendtime,\n      participants: [],\n      tempPart: [],\n      error: false,\n      errorMsg: \"\"\n    }\n\n    this.handleDateChange = this.handleDateChange.bind(this);\n    this.handleSelectBoxChange = this.handleSelectBoxChange.bind(this);\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.handleStartTimeChange = this.handleStartTimeChange.bind(this);\n    this.handleEndTimeChange = this.handleEndTimeChange.bind(this);\n\n  }\n\n  componentDidMount() {\n    axios.get('http://localhost:5000/participants')\n      .then((res) => {\n        console.log(\"res => \", res);\n        this.setState({\n          participants: res.data,\n        })\n\n        console.log(\"Updated STATE : \", this.state.participants);\n      })\n      .catch((error) => {\n        console.log(\"Error : \", error);\n      })\n  }\n\n  componentDidUpdate() {\n    console.log(\"State Updated: \", this.state);\n  }\n\n  handleFormSubmit(event) {\n    event.preventDefault();\n\n    let lisOfparticipants = this.state.tempPart.map((item) => {\n      return item.value;\n    });\n\n    this.setState({ error: null, errorMsg: '' });\n\n    const newInterview = {\n      date: this.state.date,\n      startTime: this.state.startTime,\n      endTime: this.state.endTime,\n      participants: lisOfparticipants\n    }\n\n    console.log(\"New Exercise => \", newInterview);\n\n    // making POST REQUEST to backend  \n    axios.post('http://localhost:5000/interviews', newInterview)\n      .then((res) => {\n        console.log(\"res => \", res);\n        console.log(res.data);\n        window.location = '/';\n      })\n      .catch((error) => {\n        let errorMsg = error.response.data.message;\n        this.setState({\n          error: true,\n          errorMsg: errorMsg\n        })\n      })\n  }\n\n  handleDateChange(newDate) {\n    this.setState({\n      date: newDate,\n    })\n  }\n\n  handleSelectBoxChange(data) {\n    this.setState({ tempPart: data });\n  }\n\n  handleStartTimeChange(event) {\n    this.setState({\n      startTime: event.target.value\n    })\n  }\n\n  handleEndTimeChange(event) {\n    this.setState({\n      endTime: event.target.value\n    })\n  }\n\n  getOptions = (users) => {\n    const options = [];\n    for (let user of users) {\n      options.push({ label: user.name, value: user });\n    }\n    console.log(options,'options')\n    return options;\n  };\n\n\n  render() {\n    // let defaultPart = this.props.location.state.pa\n\n    return (\n      <div className=\"bg-light section\">\n        <h3 style={{ textAlign: \"center\" }}> Create Interview</h3>\n\n        {this.state.error ?\n          (<Error message={this.state.errorMsg} />) : (<></>)\n        }\n\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"form-group\">\n            <label><strong>Select Participants : </strong></label>\n            <Select\n              isMulti\n              closeMenuOnSelect={true}\n              name=\"candidates\"\n              options={this.getOptions(this.state.participants)}\n              className=\"basic-multi-select\"\n              classNamePrefix=\"select\"\n              value={!this.state.tempPart.length ? this.getOptions(this.state.participants.filter(option => \n              this.props.location.state.participants.includes(option.id))) : this.getOptions(this.state.tempPart.map((item) => item.value ))}\n              onChange={(selectedOption) => {\n                console.log(selectedOption)\n                this.handleSelectBoxChange(selectedOption);\n              }}\n            />\n          </div>\n\n          < div className=\"form-group\" >\n            <label><strong>Date: </strong></label>\n            <div>\n              <DatePicker\n                selected={this.state.date}\n                onChange={this.handleDateChange}\n              />\n            </div>\n          </div>\n\n          <div className=\"form-row\">\n            <div className=\"form-group col-md-6\">\n              <label><strong>Start Time:</strong></label>\n              <input type=\"time\" className=\"form-control\" id=\"start_time\" value={this.state.startTime}\n                onChange={this.handleStartTimeChange} />\n\n            </div>\n            <div className=\"form-group col-md-6\">\n              <label><strong>End Time:</strong></label>\n              <input type=\"time\" className=\"form-control\" id=\"end_time\" value={this.state.endTime}\n                onChange={this.handleEndTimeChange} />\n            </div>\n          </div>\n\n          <div className=\"form-group\">\n            <input type=\"submit\" value=\"Save Details\" className=\"btn btn-primary\" />\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default EditInterview;"]},"metadata":{},"sourceType":"module"}